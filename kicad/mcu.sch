EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 4 5
Title "MPPT 2420 RC"
Date "2020-05-30"
Rev "0.1.1"
Comp "Libre Solar Technologies GmbH"
Comment1 "Author: Martin Jäger"
Comment2 "Website: http://libre.solar"
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L power:GND #PWR09
U 1 1 58A8D5E6
P 5000 6900
F 0 "#PWR09" H 5000 6650 50  0001 C CNN
F 1 "GND" H 5000 6750 50  0000 C CNN
F 2 "" H 5000 6900 50  0000 C CNN
F 3 "" H 5000 6900 50  0000 C CNN
	1    5000 6900
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR010
U 1 1 58A8D6E3
P 5400 6900
F 0 "#PWR010" H 5400 6650 50  0001 C CNN
F 1 "GND" H 5400 6750 50  0000 C CNN
F 2 "" H 5400 6900 50  0000 C CNN
F 3 "" H 5400 6900 50  0000 C CNN
	1    5400 6900
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR011
U 1 1 58A8D77B
P 5800 6900
F 0 "#PWR011" H 5800 6650 50  0001 C CNN
F 1 "GND" H 5800 6750 50  0000 C CNN
F 2 "" H 5800 6900 50  0000 C CNN
F 3 "" H 5800 6900 50  0000 C CNN
	1    5800 6900
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR012
U 1 1 58A8D813
P 6200 6900
F 0 "#PWR012" H 6200 6650 50  0001 C CNN
F 1 "GND" H 6200 6750 50  0000 C CNN
F 2 "" H 6200 6900 50  0000 C CNN
F 3 "" H 6200 6900 50  0000 C CNN
	1    6200 6900
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR013
U 1 1 58A8D8AB
P 2200 1900
F 0 "#PWR013" H 2200 1650 50  0001 C CNN
F 1 "GND" H 2200 1750 50  0000 C CNN
F 2 "" H 2200 1900 50  0000 C CNN
F 3 "" H 2200 1900 50  0000 C CNN
	1    2200 1900
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR014
U 1 1 58A8DF29
P 5000 6500
F 0 "#PWR014" H 5000 6350 50  0001 C CNN
F 1 "+3.3V" H 5000 6640 50  0000 C CNN
F 2 "" H 5000 6500 50  0000 C CNN
F 3 "" H 5000 6500 50  0000 C CNN
	1    5000 6500
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR015
U 1 1 58A8E026
P 5400 6500
F 0 "#PWR015" H 5400 6350 50  0001 C CNN
F 1 "+3.3V" H 5400 6640 50  0000 C CNN
F 2 "" H 5400 6500 50  0000 C CNN
F 3 "" H 5400 6500 50  0000 C CNN
	1    5400 6500
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR016
U 1 1 58A8E0BE
P 5800 6500
F 0 "#PWR016" H 5800 6350 50  0001 C CNN
F 1 "+3.3V" H 5800 6640 50  0000 C CNN
F 2 "" H 5800 6500 50  0000 C CNN
F 3 "" H 5800 6500 50  0000 C CNN
	1    5800 6500
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR017
U 1 1 58A8E156
P 6200 6500
F 0 "#PWR017" H 6200 6350 50  0001 C CNN
F 1 "+3.3V" H 6200 6640 50  0000 C CNN
F 2 "" H 6200 6500 50  0000 C CNN
F 3 "" H 6200 6500 50  0000 C CNN
	1    6200 6500
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR023
U 1 1 58A91B30
P 6000 2500
F 0 "#PWR023" H 6000 2250 50  0001 C CNN
F 1 "GND" H 6000 2350 50  0000 C CNN
F 2 "" H 6000 2500 50  0000 C CNN
F 3 "" H 6000 2500 50  0000 C CNN
	1    6000 2500
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR024
U 1 1 58A94580
P 3000 1900
F 0 "#PWR024" H 3000 1750 50  0001 C CNN
F 1 "+3.3V" H 3000 2040 50  0000 C CNN
F 2 "" H 3000 1900 50  0000 C CNN
F 3 "" H 3000 1900 50  0000 C CNN
	1    3000 1900
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR025
U 1 1 58A94885
P 1200 1400
F 0 "#PWR025" H 1200 1250 50  0001 C CNN
F 1 "+3.3V" H 1200 1540 50  0000 C CNN
F 2 "" H 1200 1400 50  0000 C CNN
F 3 "" H 1200 1400 50  0000 C CNN
	1    1200 1400
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR026
U 1 1 58AB7879
P 1300 2600
F 0 "#PWR026" H 1300 2350 50  0001 C CNN
F 1 "GND" H 1300 2450 50  0000 C CNN
F 2 "" H 1300 2600 50  0000 C CNN
F 3 "" H 1300 2600 50  0000 C CNN
	1    1300 2600
	-1   0    0    -1  
$EndComp
$Comp
L Project:C C29
U 1 1 58AB7F87
P 1300 2400
F 0 "C29" H 1320 2470 50  0000 L CNN
F 1 "100nF" H 1320 2330 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 1300 2400 50  0001 C CNN
F 3 "" H 1300 2400 50  0000 C CNN
F 4 "Murata" H -5950 -500 50  0001 C CNN "Manufacturer"
F 5 "GRM188R71H104KA93D" H -5950 -500 50  0001 C CNN "PartNumber"
	1    1300 2400
	-1   0    0    -1  
$EndComp
$Comp
L Project:C C30
U 1 1 58AB8568
P 5000 6700
F 0 "C30" H 5020 6770 50  0000 L CNN
F 1 "100nF" H 5020 6630 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 5000 6700 50  0001 C CNN
F 3 "" H 5000 6700 50  0000 C CNN
F 4 "Murata" H 3600 1200 50  0001 C CNN "Manufacturer"
F 5 "GRM188R71H104KA93D" H 3600 1200 50  0001 C CNN "PartNumber"
	1    5000 6700
	1    0    0    -1  
$EndComp
$Comp
L Project:C C31
U 1 1 58AB8BE5
P 5400 6700
F 0 "C31" H 5420 6770 50  0000 L CNN
F 1 "100nF" H 5420 6630 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 5400 6700 50  0001 C CNN
F 3 "" H 5400 6700 50  0000 C CNN
F 4 "Murata" H 3650 1200 50  0001 C CNN "Manufacturer"
F 5 "GRM188R71H104KA93D" H 3650 1200 50  0001 C CNN "PartNumber"
	1    5400 6700
	1    0    0    -1  
$EndComp
$Comp
L Project:C C32
U 1 1 58AB8D4F
P 5800 6700
F 0 "C32" H 5820 6770 50  0000 L CNN
F 1 "100nF" H 5820 6630 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 5800 6700 50  0001 C CNN
F 3 "" H 5800 6700 50  0000 C CNN
F 4 "Murata" H 3700 1200 50  0001 C CNN "Manufacturer"
F 5 "GRM188R71H104KA93D" H 3700 1200 50  0001 C CNN "PartNumber"
	1    5800 6700
	1    0    0    -1  
$EndComp
$Comp
L Project:C C34
U 1 1 58AB8FDB
P 2200 1700
F 0 "C34" H 2225 1775 50  0000 L CNN
F 1 "10nF" H 2225 1625 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 2200 1700 50  0001 C CNN
F 3 "" H 2200 1700 50  0000 C CNN
F 4 "100V, X7R" H 2200 1700 50  0001 C CNN "Remarks"
F 5 "Murata" H 2200 1700 50  0001 C CNN "Manufacturer"
F 6 "GCM188R72A103KA37D" H 2200 1700 50  0001 C CNN "PartNumber"
	1    2200 1700
	1    0    0    -1  
$EndComp
$Comp
L Project:C C33
U 1 1 58AB9291
P 6200 6700
F 0 "C33" H 6220 6770 50  0000 L CNN
F 1 "2.2µF" H 6220 6630 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 6200 6700 50  0001 C CNN
F 3 "" H 6200 6700 50  0000 C CNN
F 4 "Murata" H 3750 1200 50  0001 C CNN "Manufacturer"
F 5 "GRM188R61E225KA12D" H 3750 1200 50  0001 C CNN "PartNumber"
F 6 "25V, X5R" H 150 1900 60  0001 C CNN "Remarks"
	1    6200 6700
	1    0    0    -1  
$EndComp
$Comp
L Project:R R42
U 1 1 58ADF91D
P 6000 2000
F 0 "R42" V 5925 2000 50  0000 C CNN
F 1 "1k" V 6075 2000 50  0000 C CNN
F 2 "LibreSolar:R_0603_1608" H 6000 2000 50  0001 C CNN
F 3 "" H 6000 2000 50  0000 C CNN
F 4 "Yageo" H -3500 -2900 50  0001 C CNN "Manufacturer"
F 5 "RC0603FR-071KL" H -3500 -2900 50  0001 C CNN "PartNumber"
	1    6000 2000
	1    0    0    1   
$EndComp
$Comp
L power:GND #PWR030
U 1 1 58C29FC4
P 7000 2100
F 0 "#PWR030" H 7000 1850 50  0001 C CNN
F 1 "GND" H 7000 1950 50  0000 C CNN
F 2 "" H 7000 2100 50  0000 C CNN
F 3 "" H 7000 2100 50  0000 C CNN
	1    7000 2100
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR031
U 1 1 58C2A17E
P 7000 1750
F 0 "#PWR031" H 7000 1600 50  0001 C CNN
F 1 "+3.3V" H 7000 1890 50  0000 C CNN
F 2 "" H 7000 1750 50  0000 C CNN
F 3 "" H 7000 1750 50  0000 C CNN
	1    7000 1750
	1    0    0    -1  
$EndComp
$Comp
L power:PWR_FLAG #FLG032
U 1 1 58BFF095
P 2000 1400
F 0 "#FLG032" H 2000 1475 50  0001 C CNN
F 1 "PWR_FLAG" H 2000 1550 50  0000 C CNN
F 2 "" H 2000 1400 50  0001 C CNN
F 3 "" H 2000 1400 50  0001 C CNN
	1    2000 1400
	1    0    0    -1  
$EndComp
$Comp
L LibreSolar:ST_Nucleo_SWD_5p SWD1
U 1 1 58C4B6A9
P 7700 2000
F 0 "SWD1" H 7500 2400 50  0000 L CNN
F 1 "ST_Nucleo_SWD" H 7500 1600 50  0000 L CNN
F 2 "Connector_PinHeader_2.54mm:PinHeader_1x05_P2.54mm_Vertical" H 7700 1400 30  0001 C CIN
F 3 "" H 7850 2050 60  0001 C CNN
F 4 "Any" H 7700 2000 50  0001 C CNN "Manufacturer"
F 5 "Standard 2.54 mm pitch 1x5 pin header" H 7700 2000 50  0001 C CNN "PartNumber"
	1    7700 2000
	1    0    0    -1  
$EndComp
$Comp
L LibreSolar:LED LED1
U 1 1 58AE0EA3
P 6000 2300
AR Path="/58AE0EA3" Ref="LED1"  Part="1" 
AR Path="/58A68DCB/58AE0EA3" Ref="LED1"  Part="1" 
F 0 "LED1" H 6125 2350 50  0000 L CNN
F 1 "red" H 6125 2250 50  0000 L CNN
F 2 "LED_THT:LED_D3.0mm" H 6025 2250 50  0001 C CNN
F 3 "" H 6125 2350 50  0001 C CNN
F 4 "Lite-On" H 6000 2300 60  0001 C CNN "Manufacturer"
F 5 "LTST-C190KRKT" H 6000 2300 60  0001 C CNN "PartNumber"
F 6 "red" H 6000 2300 60  0001 C CNN "Remarks"
	1    6000 2300
	1    0    0    -1  
$EndComp
Text Notes 5600 1200 0    100  ~ 0
Status LED
Text Notes 3400 1500 0    100  ~ 0
MCU STM32G431
Text Notes 8200 1300 2    100  ~ 0
STM Nucleo SWD\nand USART
Text Label 1400 2200 0    50   ~ 0
~RESET
Text Label 7100 2100 0    50   ~ 0
SWDIO
Text Label 7100 1900 0    50   ~ 0
SWCLK
Text Label 7100 2200 0    50   ~ 0
~RESET
Text Label 6000 1400 3    50   ~ 0
LED_PWR
Wire Wire Line
	5400 6500 5400 6600
Wire Wire Line
	5000 6500 5000 6600
Wire Wire Line
	5800 6500 5800 6600
Wire Wire Line
	6200 6600 6200 6500
Wire Wire Line
	5400 6900 5400 6800
Wire Wire Line
	1300 2500 1300 2600
Wire Wire Line
	5000 6900 5000 6800
Wire Wire Line
	5800 6800 5800 6900
Wire Wire Line
	2200 1800 2200 1900
Wire Wire Line
	6200 6800 6200 6900
Wire Wire Line
	6000 1900 6000 1400
Wire Wire Line
	1300 2200 1300 2300
Wire Wire Line
	7000 1800 7400 1800
Wire Wire Line
	7000 1750 7000 1800
Wire Wire Line
	2200 1500 2200 1600
Wire Wire Line
	7400 1900 7100 1900
Wire Wire Line
	7400 2100 7100 2100
Wire Wire Line
	7400 2200 7100 2200
Wire Wire Line
	7400 2000 7000 2000
Wire Wire Line
	7000 2000 7000 2100
Wire Wire Line
	6000 2400 6000 2500
Wire Wire Line
	6000 2100 6000 2200
Text Notes 5100 3300 0    50   ~ 0
Tight tolerance\nfor CAN interface
$Comp
L LibreSolar:24AAxx-OT U6
U 1 1 5929D79A
P 2500 6900
AR Path="/5929D79A" Ref="U6"  Part="1" 
AR Path="/58A68DCB/5929D79A" Ref="U6"  Part="1" 
F 0 "U6" H 2500 7265 50  0000 C CNN
F 1 "24AA32" H 2500 7174 50  0000 C CNN
F 2 "LibreSolar:SOT-23-5" H 2500 6500 50  0001 C CNN
F 3 "" H 2500 7150 60  0000 C CNN
F 4 "Microchip" H 2500 7400 60  0001 C CNN "Manufacturer"
F 5 "24AA32AFT-I/OT" H 2500 7300 60  0001 C CNN "PartNumber"
	1    2500 6900
	1    0    0    -1  
$EndComp
Text Notes 2100 6300 0    100  ~ 0
EEPROM
$Comp
L power:GND #PWR033
U 1 1 5929D877
P 3200 7200
F 0 "#PWR033" H 3200 6950 50  0001 C CNN
F 1 "GND" H 3200 7050 50  0000 C CNN
F 2 "" H 3200 7200 50  0000 C CNN
F 3 "" H 3200 7200 50  0000 C CNN
	1    3200 7200
	1    0    0    -1  
$EndComp
$Comp
L Project:C C22
U 1 1 5929DAC6
P 3200 6900
F 0 "C22" H 3220 6970 50  0000 L CNN
F 1 "100nF" H 3220 6830 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 3200 6900 50  0001 C CNN
F 3 "" H 3200 6900 50  0000 C CNN
F 4 "Murata" H 1800 1400 50  0001 C CNN "Manufacturer"
F 5 "GRM188R71H104KA93D" H 1800 1400 50  0001 C CNN "PartNumber"
	1    3200 6900
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR034
U 1 1 5929DB8B
P 3200 6600
F 0 "#PWR034" H 3200 6450 50  0001 C CNN
F 1 "+3.3V" H 3200 6740 50  0000 C CNN
F 2 "" H 3200 6600 50  0000 C CNN
F 3 "" H 3200 6600 50  0000 C CNN
	1    3200 6600
	1    0    0    -1  
$EndComp
Wire Wire Line
	2900 7000 3000 7000
Wire Wire Line
	3000 6900 3000 7000
Wire Wire Line
	3000 7100 3200 7100
Wire Wire Line
	3200 7000 3200 7100
Connection ~ 3200 7100
Wire Wire Line
	2900 6900 3000 6900
Connection ~ 3000 7000
Wire Wire Line
	2900 6800 3000 6800
Wire Wire Line
	3000 6800 3000 6700
Wire Wire Line
	3000 6700 3200 6700
Wire Wire Line
	3200 6600 3200 6700
Connection ~ 3200 6700
Text Label 1600 6800 0    50   ~ 0
I2C1_SCL
Text Label 1600 6900 0    50   ~ 0
I2C1_SDA
Text Notes 5100 7600 0    50   ~ 0
If not stated otherwise, all MLCC 50V X7R
Wire Wire Line
	3200 7100 3200 7200
Wire Wire Line
	3000 7000 3000 7100
Wire Wire Line
	3200 6700 3200 6800
Wire Wire Line
	3000 2000 3000 2100
Wire Wire Line
	3000 2000 3100 2000
Wire Wire Line
	3100 2000 3100 2100
Wire Wire Line
	3100 2000 3200 2000
Wire Wire Line
	3200 2000 3200 2100
Connection ~ 3100 2000
Wire Wire Line
	3200 2000 3300 2000
Connection ~ 3200 2000
$Comp
L power:GND #PWR094
U 1 1 5AFDC9E2
P 3200 5300
F 0 "#PWR094" H 3200 5050 50  0001 C CNN
F 1 "GND" H 3200 5150 50  0000 C CNN
F 2 "" H 3200 5300 50  0000 C CNN
F 3 "" H 3200 5300 50  0000 C CNN
	1    3200 5300
	1    0    0    -1  
$EndComp
Wire Wire Line
	3200 5300 3200 5200
Wire Wire Line
	3200 5200 3100 5200
Wire Wire Line
	3100 5200 3100 5100
Connection ~ 3200 5200
Wire Wire Line
	3200 5200 3200 5100
Wire Wire Line
	3100 5200 3000 5200
Wire Wire Line
	3000 5200 3000 5100
Connection ~ 3100 5200
Wire Wire Line
	3000 5200 2900 5200
Wire Wire Line
	2900 5200 2900 5100
Connection ~ 3000 5200
Wire Wire Line
	3000 1900 3000 2000
Connection ~ 3000 2000
Wire Wire Line
	3300 2100 3300 2000
Text Label 3900 2700 0    50   ~ 0
OSC_IN
Text Label 3900 2800 0    50   ~ 0
OSC_OUT
$Comp
L Project:Resonator Y1
U 1 1 5DAA9F9F
P 4900 2800
F 0 "Y1" H 4900 2900 50  0000 C CNN
F 1 "8MHz" H 5200 2700 50  0000 C CNN
F 2 "LibreSolar:Resonator_Murata_CSTNE" H 4900 2800 50  0001 C CNN
F 3 "" H 4900 2800 50  0001 C CNN
F 4 "Murata" H 4900 2800 50  0001 C CNN "Manufacturer"
F 5 "CSTNE8M00GH5C000R0" H 4900 2800 50  0001 C CNN "PartNumber"
F 6 "0.07%" H 5200 2600 50  0000 C CNN "Remarks"
	1    4900 2800
	1    0    0    -1  
$EndComp
Wire Wire Line
	3700 2800 4700 2800
Wire Wire Line
	4500 2700 4500 2600
Wire Wire Line
	4500 2600 5300 2600
Wire Wire Line
	5300 2600 5300 2800
Wire Wire Line
	5300 2800 5100 2800
Wire Wire Line
	3700 2700 4500 2700
$Comp
L power:GND #PWR048
U 1 1 5DAB3D3B
P 4900 3100
F 0 "#PWR048" H 4900 2850 50  0001 C CNN
F 1 "GND" H 4900 2950 50  0000 C CNN
F 2 "" H 4900 3100 50  0000 C CNN
F 3 "" H 4900 3100 50  0000 C CNN
	1    4900 3100
	1    0    0    -1  
$EndComp
Wire Wire Line
	4900 3000 4900 3100
Wire Wire Line
	2300 3400 1600 3400
Wire Wire Line
	1600 3800 2300 3800
Wire Wire Line
	4300 4700 3700 4700
Wire Wire Line
	2300 4200 1600 4200
Wire Wire Line
	1600 4500 2300 4500
Wire Wire Line
	2300 4600 1600 4600
Wire Wire Line
	2300 4900 1700 4900
Wire Wire Line
	3700 3400 4300 3400
Wire Wire Line
	4300 3500 3700 3500
Text HLabel 1600 4200 0    50   Output ~ 0
TIM1_CH1
Text HLabel 4300 4700 2    50   Output ~ 0
TIM1_CH1N
Text HLabel 1600 3800 0    50   Output ~ 0
DAC1
Text HLabel 1600 3400 0    50   Input ~ 0
ADC2_IN1
Wire Wire Line
	3700 4100 4200 4100
Text Label 1700 4700 0    50   ~ 0
SWDIO
Text Label 1700 4800 0    50   ~ 0
SWCLK
Wire Wire Line
	1700 3600 2300 3600
Wire Wire Line
	2300 3700 1700 3700
Text HLabel 4300 3400 2    50   Input ~ 0
ADC1_IN15
Text HLabel 4300 3500 2    50   Input ~ 0
ADC1_IN12
$Comp
L power:GND #PWR?
U 1 1 5E044EA5
P 8800 2900
AR Path="/58E22D17/5E044EA5" Ref="#PWR?"  Part="1" 
AR Path="/5E044EA5" Ref="#PWR?"  Part="1" 
AR Path="/58A68DCB/5E044EA5" Ref="#PWR0102"  Part="1" 
F 0 "#PWR0102" H 8800 2650 50  0001 C CNN
F 1 "GND" H 8800 2750 50  0000 C CNN
F 2 "" H 8800 2900 50  0000 C CNN
F 3 "" H 8800 2900 50  0000 C CNN
	1    8800 2900
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5E044EAB
P 9300 2900
AR Path="/58E22D17/5E044EAB" Ref="#PWR?"  Part="1" 
AR Path="/5E044EAB" Ref="#PWR?"  Part="1" 
AR Path="/58A68DCB/5E044EAB" Ref="#PWR0103"  Part="1" 
F 0 "#PWR0103" H 9300 2650 50  0001 C CNN
F 1 "GND" H 9300 2750 50  0000 C CNN
F 2 "" H 9300 2900 50  0000 C CNN
F 3 "" H 9300 2900 50  0000 C CNN
	1    9300 2900
	1    0    0    -1  
$EndComp
$Comp
L Project:C C?
U 1 1 5E044EB3
P 8800 2600
AR Path="/58E22D17/5E044EB3" Ref="C?"  Part="1" 
AR Path="/5E044EB3" Ref="C?"  Part="1" 
AR Path="/58A68DCB/5E044EB3" Ref="C9"  Part="1" 
F 0 "C9" H 8825 2675 50  0000 L CNN
F 1 "100nF" H 8825 2525 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 8800 2400 50  0001 C CNN
F 3 "" H 8825 2675 50  0000 C CNN
F 4 "Murata" H 0   -3250 50  0001 C CNN "Manufacturer"
F 5 "GRM188R71H104KA93D" H 0   -3250 50  0001 C CNN "PartNumber"
	1    8800 2600
	1    0    0    -1  
$EndComp
$Comp
L Project:R R?
U 1 1 5E044EC1
P 9300 2000
AR Path="/58E22D17/5E044EC1" Ref="R?"  Part="1" 
AR Path="/5E044EC1" Ref="R?"  Part="1" 
AR Path="/58A68DCB/5E044EC1" Ref="R7"  Part="1" 
F 0 "R7" V 9230 2000 50  0000 C CNN
F 1 "10k" V 9370 2000 50  0000 C CNN
F 2 "LibreSolar:R_0603_1608" H 9300 2000 50  0001 C CNN
F 3 "" H 9300 2000 50  0000 C CNN
F 4 "Yageo" H 0   -3200 50  0001 C CNN "Manufacturer"
F 5 "RC0603FR-0710KL" H 0   -3200 50  0001 C CNN "PartNumber"
	1    9300 2000
	1    0    0    -1  
$EndComp
$Comp
L Device:Thermistor_NTC RT?
U 1 1 5E044EC9
P 9300 2600
AR Path="/58E22D17/5E044EC9" Ref="RT?"  Part="1" 
AR Path="/5E044EC9" Ref="RT?"  Part="1" 
AR Path="/58A68DCB/5E044EC9" Ref="RT1"  Part="1" 
F 0 "RT1" V 9150 2600 50  0000 C CNN
F 1 "10k" V 9400 2600 50  0000 C CNN
F 2 "LibreSolar:R_0603_1608" H 9300 2650 50  0001 C CNN
F 3 "" H 9300 2650 50  0001 C CNN
F 4 "TDK" H 0   -3250 50  0001 C CNN "Manufacturer"
F 5 "NTCG163JF103FT1S" H 0   -3250 50  0001 C CNN "PartNumber"
	1    9300 2600
	1    0    0    -1  
$EndComp
Wire Wire Line
	9300 1800 9300 1900
Wire Wire Line
	8800 2700 8800 2900
Wire Wire Line
	9300 2750 9300 2900
Wire Wire Line
	8800 2500 8800 2300
Wire Wire Line
	8800 2300 9300 2300
Wire Wire Line
	9300 2100 9300 2300
Connection ~ 9300 2300
Text Notes 8725 1250 0    100  ~ 0
Temperature (ext./int.)
Wire Wire Line
	9300 2300 9300 2450
$Comp
L power:GND #PWR?
U 1 1 5E044EDA
P 9800 2900
AR Path="/58E22D17/5E044EDA" Ref="#PWR?"  Part="1" 
AR Path="/5E044EDA" Ref="#PWR?"  Part="1" 
AR Path="/58A68DCB/5E044EDA" Ref="#PWR0105"  Part="1" 
F 0 "#PWR0105" H 9800 2650 50  0001 C CNN
F 1 "GND" H 9800 2750 50  0000 C CNN
F 2 "" H 9800 2900 50  0000 C CNN
F 3 "" H 9800 2900 50  0000 C CNN
	1    9800 2900
	1    0    0    -1  
$EndComp
$Comp
L Project:C C?
U 1 1 5E044EE8
P 9800 2600
AR Path="/58E22D17/5E044EE8" Ref="C?"  Part="1" 
AR Path="/5E044EE8" Ref="C?"  Part="1" 
AR Path="/58A68DCB/5E044EE8" Ref="C36"  Part="1" 
F 0 "C36" H 9825 2675 50  0000 L CNN
F 1 "100nF" H 9825 2525 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 9800 2400 50  0001 C CNN
F 3 "" H 9825 2675 50  0000 C CNN
F 4 "Murata" H 1000 -3250 50  0001 C CNN "Manufacturer"
F 5 "GRM188R71H104KA93D" H 1000 -3250 50  0001 C CNN "PartNumber"
	1    9800 2600
	1    0    0    -1  
$EndComp
$Comp
L Project:R R?
U 1 1 5E044EF6
P 10300 2000
AR Path="/58E22D17/5E044EF6" Ref="R?"  Part="1" 
AR Path="/5E044EF6" Ref="R?"  Part="1" 
AR Path="/58A68DCB/5E044EF6" Ref="R39"  Part="1" 
F 0 "R39" V 10230 2000 50  0000 C CNN
F 1 "10k" V 10370 2000 50  0000 C CNN
F 2 "LibreSolar:R_0603_1608" H 10300 2000 50  0001 C CNN
F 3 "" H 10300 2000 50  0000 C CNN
F 4 "Yageo" H 1000 -3200 50  0001 C CNN "Manufacturer"
F 5 "RC0603FR-0710KL" H 1000 -3200 50  0001 C CNN "PartNumber"
	1    10300 2000
	1    0    0    -1  
$EndComp
Wire Wire Line
	10300 1800 10300 1900
Wire Wire Line
	9800 2700 9800 2900
Wire Wire Line
	9800 2500 9800 2300
Wire Wire Line
	9800 2300 10300 2300
Wire Wire Line
	10300 2100 10300 2300
Connection ~ 10300 2300
Text HLabel 10300 2500 3    50   Input ~ 0
TEMP_BAT
Wire Wire Line
	2900 2100 2900 2000
Wire Wire Line
	2900 2000 2500 2000
Wire Wire Line
	3700 4900 4200 4900
Text Label 4200 4900 2    50   ~ 0
LED_PWR
Wire Wire Line
	2300 3500 1700 3500
Text Label 1700 3500 0    50   ~ 0
ADC1_IN2
Text Label 8800 2300 0    50   ~ 0
ADC1_IN2
Wire Wire Line
	3700 4600 4300 4600
Text HLabel 4300 4600 2    50   Input ~ 0
ADC1_IN11
$Comp
L power:VDDA #PWR0108
U 1 1 5E2EE8A3
P 2500 1400
F 0 "#PWR0108" H 2500 1250 50  0001 C CNN
F 1 "VDDA" H 2517 1573 50  0000 C CNN
F 2 "" H 2500 1400 50  0001 C CNN
F 3 "" H 2500 1400 50  0001 C CNN
	1    2500 1400
	1    0    0    -1  
$EndComp
$Comp
L Project:R R?
U 1 1 5E2EEC8F
P 1500 1500
AR Path="/58E22D17/5E2EEC8F" Ref="R?"  Part="1" 
AR Path="/5E2EEC8F" Ref="R?"  Part="1" 
AR Path="/58A68DCB/5E2EEC8F" Ref="R40"  Part="1" 
F 0 "R40" V 1430 1500 50  0000 C CNN
F 1 "100R" V 1570 1500 50  0000 C CNN
F 2 "LibreSolar:R_0603_1608" H 1500 1500 50  0001 C CNN
F 3 "" H 1500 1500 50  0000 C CNN
F 4 "Yageo" H -7800 -3700 50  0001 C CNN "Manufacturer"
F 5 "RC0603FR-07100RL" H -7800 -3700 50  0001 C CNN "PartNumber"
	1    1500 1500
	0    1    1    0   
$EndComp
$Comp
L power:GND #PWR0109
U 1 1 5E31451A
P 1800 1900
F 0 "#PWR0109" H 1800 1650 50  0001 C CNN
F 1 "GND" H 1800 1750 50  0000 C CNN
F 2 "" H 1800 1900 50  0000 C CNN
F 3 "" H 1800 1900 50  0000 C CNN
	1    1800 1900
	1    0    0    -1  
$EndComp
$Comp
L Project:C C39
U 1 1 5E314527
P 1800 1700
F 0 "C39" H 1820 1770 50  0000 L CNN
F 1 "2.2µF" H 1820 1630 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 1800 1700 50  0001 C CNN
F 3 "" H 1800 1700 50  0000 C CNN
F 4 "Murata" H -650 -3800 50  0001 C CNN "Manufacturer"
F 5 "GRM188R61E225KA12D" H -650 -3800 50  0001 C CNN "PartNumber"
F 6 "25V, X5R" H -4250 -3100 60  0001 C CNN "Remarks"
	1    1800 1700
	1    0    0    -1  
$EndComp
Wire Wire Line
	1800 1800 1800 1900
Wire Wire Line
	2500 1400 2500 1500
Wire Wire Line
	2200 1500 2500 1500
Connection ~ 2500 1500
Wire Wire Line
	2500 1500 2500 2000
Connection ~ 2200 1500
Wire Wire Line
	1400 1500 1200 1500
Wire Wire Line
	1200 1500 1200 1400
Wire Wire Line
	1800 1600 1800 1500
Connection ~ 1800 1500
Wire Wire Line
	1800 1500 1600 1500
Wire Wire Line
	1800 1500 2000 1500
Wire Wire Line
	2000 1400 2000 1500
Connection ~ 2000 1500
Wire Wire Line
	2000 1500 2200 1500
Text Label 9100 5400 2    50   ~ 0
SPI1_SSEL
Wire Wire Line
	10300 2300 10300 2500
$Comp
L Project:UEXT J?
U 1 1 5DCF735E
P 7600 4900
AR Path="/5DCF735E" Ref="J?"  Part="1" 
AR Path="/58A68DCB/5DCF735E" Ref="J7"  Part="1" 
F 0 "J7" H 7683 5765 50  0000 C CNN
F 1 "UEXT" H 7683 5674 50  0000 C CNN
F 2 "LibreSolar:Box_Header_2x05x2.54mm_Straight" H 7600 3950 50  0001 C CIN
F 3 "" H 7600 4800 60  0000 C CNN
	1    7600 4900
	1    0    0    -1  
$EndComp
$Comp
L Project:R R?
U 1 1 5DCF7366
P 8600 4300
AR Path="/58BE3089/5DCF7366" Ref="R?"  Part="1" 
AR Path="/58A68DCB/5DCF7366" Ref="R21"  Part="1" 
AR Path="/5DCF7366" Ref="R?"  Part="1" 
F 0 "R21" V 8530 4300 50  0000 C CNN
F 1 "2.2k" V 8670 4300 50  0000 C CNN
F 2 "LibreSolar:R_0603_1608" H 8600 4300 50  0001 C CNN
F 3 "" H 8600 4300 50  0000 C CNN
F 4 "Yageo" H 3450 -1050 50  0001 C CNN "Manufacturer"
F 5 "RC0603FR-072K2L" H 3450 -1050 50  0001 C CNN "PartNumber"
	1    8600 4300
	1    0    0    1   
$EndComp
$Comp
L Project:R R?
U 1 1 5DCF736E
P 8300 4300
AR Path="/58BE3089/5DCF736E" Ref="R?"  Part="1" 
AR Path="/58A68DCB/5DCF736E" Ref="R20"  Part="1" 
AR Path="/5DCF736E" Ref="R?"  Part="1" 
F 0 "R20" V 8230 4300 50  0000 C CNN
F 1 "2.2k" V 8370 4300 50  0000 C CNN
F 2 "LibreSolar:R_0603_1608" H 8300 4300 50  0001 C CNN
F 3 "" H 8300 4300 50  0000 C CNN
F 4 "Yageo" H 3500 -1050 50  0001 C CNN "Manufacturer"
F 5 "RC0603FR-072K2L" H 3500 -1050 50  0001 C CNN "PartNumber"
	1    8300 4300
	1    0    0    1   
$EndComp
Wire Wire Line
	8300 4200 8300 4100
Wire Wire Line
	8600 4200 8600 4100
Wire Wire Line
	8300 4100 8600 4100
$Comp
L power:+3.3V #PWR?
U 1 1 5DCF7377
P 8100 4000
AR Path="/58BE3089/5DCF7377" Ref="#PWR?"  Part="1" 
AR Path="/58A68DCB/5DCF7377" Ref="#PWR0101"  Part="1" 
AR Path="/5DCF7377" Ref="#PWR?"  Part="1" 
F 0 "#PWR0101" H 8100 3850 50  0001 C CNN
F 1 "+3.3V" H 8100 4140 50  0000 C CNN
F 2 "" H 8100 4000 50  0000 C CNN
F 3 "" H 8100 4000 50  0000 C CNN
	1    8100 4000
	1    0    0    -1  
$EndComp
Wire Wire Line
	8000 4300 8100 4300
Wire Wire Line
	8100 4300 8100 4100
Wire Wire Line
	8300 4100 8100 4100
Connection ~ 8300 4100
Connection ~ 8100 4100
Wire Wire Line
	8100 4100 8100 4000
Wire Wire Line
	8000 4800 8300 4800
Wire Wire Line
	8000 4900 8600 4900
Wire Wire Line
	8300 4400 8300 4800
Connection ~ 8300 4800
Wire Wire Line
	8600 4400 8600 4900
Connection ~ 8600 4900
$Comp
L power:GND #PWR?
U 1 1 5DCF7389
P 7500 5700
AR Path="/5D78A622/5DCF7389" Ref="#PWR?"  Part="1" 
AR Path="/5DCF7389" Ref="#PWR?"  Part="1" 
AR Path="/58A68DCB/5DCF7389" Ref="#PWR0113"  Part="1" 
F 0 "#PWR0113" H 7500 5450 50  0001 C CNN
F 1 "GND" H 7500 5550 50  0000 C CNN
F 2 "" H 7500 5700 50  0000 C CNN
F 3 "" H 7500 5700 50  0000 C CNN
	1    7500 5700
	-1   0    0    -1  
$EndComp
Wire Wire Line
	7500 5600 7500 5700
Wire Wire Line
	8000 5100 9100 5100
Wire Wire Line
	9100 5200 8000 5200
Wire Wire Line
	8000 5300 9100 5300
Wire Wire Line
	8300 4800 9100 4800
Wire Wire Line
	8600 4900 9100 4900
Wire Wire Line
	8000 5400 9100 5400
Text Label 1700 3600 0    50   ~ 0
USART2_TX
Text Label 1700 3700 0    50   ~ 0
USART2_RX
Text Label 9100 4500 2    50   ~ 0
USART2_TX
Wire Wire Line
	8000 4500 9100 4500
Wire Wire Line
	8000 4600 9100 4600
Text Label 9100 4600 2    50   ~ 0
USART2_RX
Text Notes 7400 3800 0    100  ~ 0
UEXT
Text Label 9100 4800 2    50   ~ 0
I2C1_SCL
Text Label 1700 4900 0    50   ~ 0
I2C1_SCL
Text Label 4200 4100 2    50   ~ 0
I2C1_SDA
Text Label 9100 4900 2    50   ~ 0
I2C1_SDA
Text Label 4200 3700 2    50   ~ 0
SPI1_SCK
Text Label 4200 3800 2    50   ~ 0
SPI1_MISO
Text Label 4200 3900 2    50   ~ 0
SPI1_MOSI
Text Label 9100 5300 2    50   ~ 0
SPI1_SCK
Text Label 9100 5100 2    50   ~ 0
SPI1_MISO
Text Label 9100 5200 2    50   ~ 0
SPI1_MOSI
Text Label 1700 4400 0    50   ~ 0
USART1_RX
Text Label 1700 4300 0    50   ~ 0
USART1_TX
Wire Wire Line
	3700 4500 4200 4500
Text Label 9800 2300 0    50   ~ 0
ADC1_IN14
Text Label 4200 4500 2    50   ~ 0
ADC1_IN14
Text HLabel 1600 4500 0    50   Input ~ 0
FDCAN1_RX
Text HLabel 1600 4600 0    50   Output ~ 0
FDCAN1_TX
Wire Wire Line
	1700 4700 2300 4700
Wire Wire Line
	1700 4800 2300 4800
Wire Wire Line
	4200 3700 3700 3700
Wire Wire Line
	4200 3800 3700 3800
Wire Wire Line
	4200 3900 3700 3900
$Comp
L Project:C C48
U 1 1 5DF93FF2
P 2100 2800
F 0 "C48" H 2120 2870 50  0000 L CNN
F 1 "100nF" H 2120 2730 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 2100 2800 50  0001 C CNN
F 3 "" H 2100 2800 50  0000 C CNN
F 4 "Murata" H -5150 -100 50  0001 C CNN "Manufacturer"
F 5 "GRM188R71H104KA93D" H -5150 -100 50  0001 C CNN "PartNumber"
	1    2100 2800
	-1   0    0    -1  
$EndComp
$Comp
L power:GND #PWR0119
U 1 1 5DF94386
P 2100 3000
F 0 "#PWR0119" H 2100 2750 50  0001 C CNN
F 1 "GND" H 2100 2850 50  0000 C CNN
F 2 "" H 2100 3000 50  0000 C CNN
F 3 "" H 2100 3000 50  0000 C CNN
	1    2100 3000
	-1   0    0    -1  
$EndComp
$Comp
L power:GND #PWR0120
U 1 1 5DFA67D0
P 1700 3000
F 0 "#PWR0120" H 1700 2750 50  0001 C CNN
F 1 "GND" H 1700 2850 50  0000 C CNN
F 2 "" H 1700 3000 50  0000 C CNN
F 3 "" H 1700 3000 50  0000 C CNN
	1    1700 3000
	-1   0    0    -1  
$EndComp
Wire Wire Line
	2100 2600 2100 2700
Wire Wire Line
	2300 2600 2100 2600
Wire Wire Line
	1700 2600 1700 2700
Connection ~ 2100 2600
Wire Wire Line
	1700 2900 1700 3000
Wire Wire Line
	2100 2900 2100 3000
$Comp
L Project:C C49
U 1 1 5DFC94F7
P 1700 2800
F 0 "C49" H 1720 2870 50  0000 L CNN
F 1 "2.2µF" H 1720 2730 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 1700 2800 50  0001 C CNN
F 3 "" H 1700 2800 50  0000 C CNN
F 4 "Murata" H -750 -2700 50  0001 C CNN "Manufacturer"
F 5 "GRM188R61E225KA12D" H -750 -2700 50  0001 C CNN "PartNumber"
F 6 "25V, X5R" H -4350 -2000 60  0001 C CNN "Remarks"
	1    1700 2800
	-1   0    0    -1  
$EndComp
$Comp
L LibreSolar:VREF #PWR0122
U 1 1 5DFE13F5
P 1700 2500
F 0 "#PWR0122" H 1700 2350 50  0001 C CNN
F 1 "VREF" H 1715 2673 50  0000 C CNN
F 2 "" H 1700 2500 50  0001 C CNN
F 3 "" H 1700 2500 50  0001 C CNN
	1    1700 2500
	-1   0    0    -1  
$EndComp
Wire Wire Line
	2100 2600 1700 2600
Wire Wire Line
	1700 2500 1700 2600
Connection ~ 1700 2600
Wire Wire Line
	2000 2200 2000 2300
Wire Wire Line
	2000 2300 2300 2300
Wire Wire Line
	2000 2200 1300 2200
$Comp
L LibreSolar:STM32G431CBTx U2
U 1 1 5E58C55A
P 3000 3600
F 0 "U2" H 3500 5100 50  0000 C CNN
F 1 "STM32G431CBTx" H 2300 5100 50  0000 C CNN
F 2 "Package_QFP:LQFP-48_7x7mm_P0.5mm" H 2550 2100 50  0001 R CNN
F 3 "https://www.st.com/resource/en/datasheet/stm32g431cb.pdf" H 3000 3600 50  0001 C CNN
F 4 "ST Microelectronics" H 3000 3600 50  0001 C CNN "Manufacturer"
F 5 "STM32G431CBT6" H 3000 3600 50  0001 C CNN "PartNumber"
	1    3000 3600
	-1   0    0    -1  
$EndComp
Wire Wire Line
	1600 6800 2100 6800
Wire Wire Line
	1600 6900 2100 6900
Text Notes 1300 7200 0    50   ~ 0
Pull-up resistors\nat UEXT connector
Wire Wire Line
	1700 4300 2300 4300
Wire Wire Line
	2300 4400 1700 4400
Text Label 4200 4000 2    50   ~ 0
SPI1_SSEL
Wire Wire Line
	4200 4000 3700 4000
Text HLabel 4300 4800 2    50   Output ~ 0
CAN_STB
Wire Wire Line
	4300 4800 3700 4800
Text Label 1700 3900 0    50   ~ 0
OPAMP2_VINM
Text Label 1700 4100 0    50   ~ 0
OPAMP2_VINP
Text Label 1700 4000 0    50   ~ 0
OPAMP2_VOUT
Text HLabel 1600 3900 0    50   Input ~ 0
OPAMP2_VINM
Text HLabel 1600 4100 0    50   Input ~ 0
OPAMP2_VINP
Text HLabel 1600 4000 0    50   Output ~ 0
OPAMP2_VOUT
Wire Wire Line
	1600 3900 2300 3900
Wire Wire Line
	1600 4000 2300 4000
Wire Wire Line
	1600 4100 2300 4100
$Comp
L LibreSolar:VREF #PWR0104
U 1 1 5E68A8BB
P 9300 1800
F 0 "#PWR0104" H 9300 1650 50  0001 C CNN
F 1 "VREF" H 9315 1973 50  0000 C CNN
F 2 "" H 9300 1800 50  0001 C CNN
F 3 "" H 9300 1800 50  0001 C CNN
	1    9300 1800
	-1   0    0    -1  
$EndComp
$Comp
L LibreSolar:VREF #PWR0107
U 1 1 5E68C250
P 10300 1800
F 0 "#PWR0107" H 10300 1650 50  0001 C CNN
F 1 "VREF" H 10315 1973 50  0000 C CNN
F 2 "" H 10300 1800 50  0001 C CNN
F 3 "" H 10300 1800 50  0001 C CNN
	1    10300 1800
	-1   0    0    -1  
$EndComp
NoConn ~ 3700 4300
NoConn ~ 3700 4400
$Comp
L power:GND #PWR0125
U 1 1 5EC4B11B
P 4400 4300
F 0 "#PWR0125" H 4400 4050 50  0001 C CNN
F 1 "GND" H 4400 4150 50  0000 C CNN
F 2 "" H 4400 4300 50  0000 C CNN
F 3 "" H 4400 4300 50  0000 C CNN
	1    4400 4300
	1    0    0    -1  
$EndComp
Wire Wire Line
	3700 4200 4400 4200
Wire Wire Line
	4400 4200 4400 4300
NoConn ~ 3700 3000
NoConn ~ 3700 3100
NoConn ~ 3700 3200
NoConn ~ 3700 3600
$Comp
L Connector_Generic:Conn_01x02 J6
U 1 1 5ED70582
P 6200 5300
F 0 "J6" H 6280 5292 50  0000 L CNN
F 1 "Conn_01x02" H 6280 5201 50  0000 L CNN
F 2 "Connector_PinHeader_2.54mm:PinHeader_1x02_P2.54mm_Vertical" H 6200 5300 50  0001 C CNN
F 3 "~" H 6200 5300 50  0001 C CNN
	1    6200 5300
	1    0    0    -1  
$EndComp
Wire Wire Line
	6000 5300 5400 5300
Wire Wire Line
	6000 5400 5400 5400
Text Label 5400 5300 0    50   ~ 0
USART1_TX
Text Label 5400 5400 0    50   ~ 0
USART1_RX
Text Notes 5400 4900 0    100  ~ 0
Debug Serial
$EndSCHEMATC
